<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comer.ar</title>
    <meta name="description" content="Ranking de lugares para comer, por amigos que les gusta comer">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800&family=DM+Sans:wght@400;500;600;700&display=swap"
        rel="stylesheet">

    <!-- CSS -->
    <link rel="stylesheet" href="style.css">

    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js" defer></script>
    <script src="https://unpkg.com/lucide@latest" defer></script>
</head>

<body class="light-mode">
    <div id="app">
        <!-- Settings -->
        <nav class="settings-nav" aria-label="Configuración">
            <div class="dropdown">
                <button id="settings-btn" class="icon-btn" aria-label="Abrir menú de configuración"
                    aria-expanded="false">
                    <i data-lucide="settings" aria-hidden="true"></i>
                </button>
                <div id="settings-menu" class="dropdown-content hidden" role="menu">
                    <div class="menu-item" role="menuitem">
                        <span>Modo Oscuro</span>
                        <label class="switch">
                            <input type="checkbox" id="dark-mode-toggle" aria-label="Activar modo oscuro">
                            <span class="slider round"></span>
                        </label>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Header -->
        <header class="header">
            <div class="logo-container">
                <img src="./fotos/imagenes/logoB.png" alt="Comer.ar Logo" class="logo-img light-logo">
                <img src="./fotos/imagenes/logoW.png" alt="Comer.ar Logo" class="logo-img dark-logo">
            </div>
            <p class="subtitle">Acá te contamos la verdad de la milanga.</p>
        </header>

        <!-- HOME VIEW -->
        <main id="home" class="view">
            <nav class="tabs-container" role="tablist" aria-label="Navegación principal">
                <div class="mode-switcher">
                    <button class="mode-btn active" data-mode="presencial">Presencial</button>
                    <button class="mode-btn" data-mode="delivery">Delivery</button>
                </div>

                <div class="tabs-buttons">
                    <button class="tab-btn active" data-tab="ranking" role="tab" aria-selected="true"
                        aria-controls="ranking-view">Ranking</button>
                    <button class="tab-btn" data-tab="map" role="tab" aria-selected="false"
                        aria-controls="map-view">Mapa</button>
                </div>

                <div class="location-filter-container" id="location-filter-container">
                    <div class="filter-group">
                        <label for="location-filter" class="filter-label">
                            <i data-lucide="map-pin" aria-hidden="true"></i>
                            Filtrar por ubicación:
                        </label>
                        <select id="location-filter" class="location-select"
                            aria-label="Filtrar restaurantes por ubicación">
                            <option value="all">Todas las ubicaciones</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label for="sort-filter" class="filter-label">
                            <i data-lucide="arrow-up-down" aria-hidden="true"></i>
                            Ordenar por:
                        </label>
                        <select id="sort-filter" class="location-select" aria-label="Ordenar restaurantes">
                            <option value="score">Puntaje</option>
                            <option value="date">Fecha de visita</option>
                            <option value="name">Nombre</option>
                        </select>
                    </div>
                </div>
            </nav>

            <section id="ranking-view" class="tab-content" role="tabpanel" aria-labelledby="ranking-tab">
                <div id="ranking-list" class="ranking-list">
                    <!-- Data will be injected here -->
                    <div class="loader">Cargando la selección...</div>
                </div>
            </section>

            <section id="map-view" class="tab-content hidden" role="tabpanel" aria-labelledby="map-tab">
                <div class="map-placeholder">
                    <iframe
                        src="https://www.google.com/maps/d/embed?mid=1rViUskbYtl1mWekFkuBO6AQdzEsOI20&ehbc=2E312F&noprof=1"
                        width="100%" height="450" style="border:0; border-radius: 16px;" loading="lazy" allowfullscreen
                        referrerpolicy="no-referrer-when-downgrade" title="Mapa de ubicación de restaurantes"></iframe>
                </div>
            </section>

        </main>

        <!-- Detail View (Hidden by default) -->
        <section id="detail" class="view hidden">
            <div class="detail-container">
                <button id="back-btn" class="back-btn" aria-label="Volver al ranking">
                    <i data-lucide="arrow-left" aria-hidden="true"></i> Volver al Ranking
                </button>
                <article id="restaurant-content">
                    <!-- Detail content injected here -->
                </article>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p>Copyright 2026 - Wilson - V1.0</p>
        </footer>
    </div>

    <!-- Lightbox -->
    <div id="lightbox" role="dialog" aria-modal="true" aria-label="Visor de imágenes">
        <button id="lightbox-close" aria-label="Cerrar visor de imágenes">&times;</button>
        <img id="lightbox-img" src="" alt="Imagen ampliada">
    </div>

    <!-- Survey Modal -->
    <div id="survey-modal" class="modal-backdrop hidden" role="dialog" aria-modal="true"
        aria-label="Encuesta de usuarios">
        <div class="modal-content">
            <button id="survey-close" class="modal-close" aria-label="Cerrar encuesta">&times;</button>
            <div id="survey-container">
                <!-- Iframe injected via JS -->
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="main.js"></script>
    <script>
        lucide.createIcons();
    </script>
</body>

</html>